<p-panel styleClass="my-tasks-container">
  <!-- Header with Refresh Button using PrimeNG Card -->
  <p-card styleClass="header-card">
    <ng-template pTemplate="header">
      <p-panel styleClass="header-flex-padded transparent-panel">
        <p-card styleClass="transparent-card">
          <ng-template pTemplate="title">
            <span class="section-title">My Tasks</span>
          </ng-template>
        </p-card>
        <p-button 
          label="Refresh" 
          icon="pi pi-refresh"
          (onClick)="loadMyTasks()"
          [loading]="loading()">
        </p-button>
      </p-panel>
    </ng-template>
  </p-card>

  <!-- Simple PrimeNG Table -->
  <p-table 
    [value]="workItems()" 
    [loading]="loading()"
    [paginator]="true" 
    [rows]="10"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [tableStyle]="{'min-width': '50rem'}"
    [sortMode]="'multiple'">
    
    <!-- ID Column -->
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="id">
          ID
          <p-sortIcon field="id"></p-sortIcon>
        </th>
        <th pSortableColumn="title">
          Title
          <p-sortIcon field="title"></p-sortIcon>
        </th>
        <th pSortableColumn="type">
          Type
          <p-sortIcon field="type"></p-sortIcon>
        </th>
        <th pSortableColumn="state">
          State
          <p-sortIcon field="state"></p-sortIcon>
        </th>
        <th pSortableColumn="priority">
          Priority
          <p-sortIcon field="priority"></p-sortIcon>
        </th>
        <th>Story Points</th>
        <th pSortableColumn="changed_date">
          Updated
          <p-sortIcon field="changed_date"></p-sortIcon>
        </th>
      </tr>
    </ng-template>
    
    <!-- Data Rows -->
    <ng-template pTemplate="body" let-item>
      <tr>
        <td>{{ item.id }}</td>
        <td>
          <span class="title-cell">
            {{ item.title || 'Untitled' }}
          </span>
        </td>
        <td>
          <p-tag 
            [value]="item.type || 'Unknown'"
            severity="info">
          </p-tag>
        </td>
        <td>
          <p-tag 
            [value]="item.state || 'Unknown'"
            [severity]="getStateSeverity(item.state)">
          </p-tag>
        </td>
        <td>
          <p-tag 
            [value]="getPriorityLabel(item.priority)"
            [severity]="getPrioritySeverity(item.priority)">
          </p-tag>
        </td>
        <td class="p-text-center">
          {{ item.story_points || '-' }}
        </td>
        <td>
          {{ item.changed_date ? (item.changed_date | date:'short') : '-' }}
        </td>
      </tr>
    </ng-template>

    <!-- Empty State using PrimeNG components -->
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7" class="p-text-center">
          <p-panel>
            <ng-template pTemplate="content">
              <p-panel class="text-center transparent-panel">
                <i class="pi pi-inbox large-icon"></i>
              </p-panel>
            </ng-template>
            <ng-template pTemplate="title">
              No Tasks Found
            </ng-template>
            <ng-template pTemplate="content">
              <p-panel class="text-center transparent-panel">
                <span class="coming-soon-text">You don't have any work items assigned to you.</span>
              </p-panel>
            </ng-template>
          </p-panel>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-panel>